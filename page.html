<!DOCTYPE html>
<html lang="en" class="min-h-full">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!-- <script>
        $("<style>").prop("type", "text/css").prop('id', 'customStyle')
            .html("<?= styles ?>").appendTo("head");
    </script> -->
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>

<div id="loading-screen" class="hidden w-full h-full fixed top-0 left-0 bottom-0 right-0  z-50">
    <div class="absolute w-full h-full opacity-50 bg-gray-200">
    </div>
    <div class="flex justify-center h-full items-center text-blue-500">
        <i class="fas fa-circle-notch fa-spin fa-5x"></i>
    </div>
</div>

<body class="bg-gray-100 min-h-screen">
    <div class="flex min-h-screen justify-center items-stretch mx-2 md:mx-4">
        <div class="flex-1 max-w-4xl bg-white min-h-full mx-auto p-4 shadow">
            <div class="flex justify-center p-2">
                <img src="https://www.baruzotech.com/wp-content/uploads/2020/06/Layer-2.png" alt="logo">
            </div>

            <div class="my-2 md:my-4 p-4 md:p-8">
                <div>
                    <label for="date" class="block text-sm font-medium text-gray-700">
                        Select Date
                    </label>
                    <input type="text" id="date" required
                        class="mt-1 block w-full border bg-gray-200 border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                </div>
            </div>

        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>

        const enabledDays = "<?= enabledDays ?>".split(",");

        const getTimeSlots = () => {
            const date = getTimestampFromDate($("#date").val());
        }

        $('#date').flatpickr({
            dateFormat: "m/d/Y", disableMobile: "true",
            "disable": [
                function (date) {
                    return checkIfDayIsEnabled(date.getDay());
                }
            ],
            onClose: () => getTimeSlots()
        });

        function checkIfDayIsEnabled(day) {
            return (enabledDays.indexOf(day + '') == -1)
        }

        function getTimestampFromDate(date) {
            try {
                if (!date) return "";
                const dateArr = date.split("/");
                const now = new Date(dateArr[2], parseInt(dateArr[0]) - 1, dateArr[1]);
                return now.getTime();
            } catch (error) {
                console.log(error);
                return "";
            }
        }

        const hideLoaderScreen = () => {
            $('#loading-screen').hide();
        }
        const showLoaderScreen = () => {
            $('#loading-screen').show();
        }

    </script>
</body>

</html>